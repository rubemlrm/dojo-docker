- name: Homeserver Setup
  hosts: all
  gather_facts: yes
  pre_tasks:
    - name: Load default vars file
      ansible.builtin.include_vars:
        dir: "host_vars/"
        files_matching: all.yml
    - name: Load default vault file
      ansible.builtin.include_vars:
        file: secrets.yaml
  roles:
    - apt
    - storage
    - resolvconf
    - openssh
    - fail2ban
    - firewall
    - cli
    - users
    - docker
    - docker-stack
